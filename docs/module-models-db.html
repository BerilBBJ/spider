<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: db</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: db</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>
            <span class="ancestors"><a href="module-models.html">models</a>~</span>db<span class="signature">()</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="db"><span class="type-signature"></span>new db<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line16">line 16</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".bulkInsertUri"><span class="type-signature">(static) </span>bulkInsertUri<span class="signature">(uriDefinitions, numOfRetries)</span><span class="type-signature"> &rarr; {Array.&lt;UUIDv4>}</span></h4>
    

    



<div class="description">
    Insert a bulk of uris into the baseUrls and paths table.
In order to achieve the same result as with findOrCreate, we create a unique
index on (path, baseUrlId) in paths and a unique index on baseUrl in
baseUrls. We then first try to insert the batch of baseUrls into the
database. We add a "ON CONFLICT DO NOTHING" to every request, so we only get
the successful entries in the return value. We then calculate the remainder
(unsuccessful inserts) and get them by findAll.
This way we retrieve all the baseUrlIds needed to insert the paths.
For the paths we just try to insert them, again with the ON CONFLICT DO
NOTHING set. We do not have to worry about the not inserted paths, since
they are already present.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>uriDefinitions</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;URIDefinition></span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">All the URIs that should be
                                                 inserted if not yet existent</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>numOfRetries</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                    3
                
                </td>
            

            <td class="description last">How often should a request that times out be
                               retried</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line185">line 185</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Return the touched pathIds
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;UUIDv4></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getEntriesPrioritized"><span class="type-signature">(static) </span>getEntriesPrioritized<span class="signature">(dateTime, limit, depth, excludedHosts)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="module-models.html#.DbResult">module:models.DbResult</a>>}</span></h4>
    

    



<div class="description">
    Get entries from DB ordered by network (incomin links) prioritization
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>dateTime</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Entries which were scraped before this
                               timestamp may be rescraped to see a temporal
                               change in the network</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>limit</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Return at most limit entries, but might be
                               less, if not as many entries are available.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>depth</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Describe the maximum depth, the scraper will
                               be looking for new entries</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>excludedHosts</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;UUIDv4></span>


            
            </td>

            

            

            <td class="description last">Exclude hosts, that should not be
                                       returned</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line818">line 818</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Return an array of DbResults
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="module-models.html#.DbResult">module:models.DbResult</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getEntriesRandomized"><span class="type-signature">(static) </span>getEntriesRandomized<span class="signature">(dateTime, limit, offset, cutoffValue, excludedHosts)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="module-models.html#.DbResult">module:models.DbResult</a>>|boolean}</span></h4>
    

    



<div class="description">
    Retrieve entries from the database that are older or as old as the passed
dateTime param
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>dateTime</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last">Specify the dateTime from which the newest
                            entry should be. The default will only
                            retrieve not yet scraped entries.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>limit</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                    100
                
                </td>
            

            <td class="description last">Specify how many entries the function
                         should return. This is seen as an upper bound.
                         If no more matching entries are available, only
                         the remainder will be returned</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>offset</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last">Set if you have already received a certain
                          amount of data. This way one can gather all
                          entries of a certain timestamp or older</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>cutoffValue</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                    1
                
                </td>
            

            <td class="description last">Set which is the deepest entry one should
                                resolve. This ensures controlled termination
                                of the scraper</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>excludedHosts</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;UUIDv4></span>


            
            </td>

            

            
                <td class="default">
                
                    []
                
                </td>
            

            <td class="description last">In order to not fill the memory up
                                         with entries that cannot yet be
                                         downloaded, one can pass an array
                                         of baseUrlIds that should be ignored</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line564">line 564</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    The DbResult contains the results
                     returned by the Database.
                     The boolean indicates whether more data is available
                     as of now.
                     Note: this can change, when the network fetches
                     new data. If both, network and DB do not have
                     anything pending, we can conclude that we have
                     finished and exit.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="module-models.html#.DbResult">module:models.DbResult</a>></span>
|

<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getEntriesRecursive"><span class="type-signature">(static) </span>getEntriesRecursive<span class="signature">(dateTime, limit, depth, excludedHosts, inverse)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="module-models.html#.DbResult">module:models.DbResult</a>>|boolean}</span></h4>
    

    



<div class="description">
    Get the entries to the download pool in a recursive manner: we allways
collect downloads from all hosts first before starting a next round
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>dateTime</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Cutoff unix timestamp: From which timestamp on
                               the scraper should see entries</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>limit</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">How many entries should be returned at maximum</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>depth</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The deepest level that will be returned</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>excludedHosts</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;UUIDv4></span>


            
            </td>

            

            

            <td class="description last">UUIDs of hosts that should not be
                                       considered for the pool</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>inverse</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Indicate whether the entries with the highest
                                or lowest link count should be returned first
                                Depending on the case, it is useful to either
                                return the most linked page (presumably this
                                page is of high importance) or the least
                                linked page (if the most linked urls are
                                always Icons or similar).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line666">line 666</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    The DbResult contains the results
                     returned by the Database.
                     The boolean indicates whether more data is available
                     as of now.
                     Note: this can change, when the network fetches
                     new data. If both, network and DB do not have
                     anything pending, we can conclude that we have
                     finished and exit.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="module-models.html#.DbResult">module:models.DbResult</a>></span>
|

<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getNeverScrapedEntries"><span class="type-signature">(static) </span>getNeverScrapedEntries<span class="signature">(limit, cutoffValue)</span><span class="type-signature"> &rarr; {Array.&lt;<a href="module-models.html#.DbResult">module:models.DbResult</a>>}</span></h4>
    

    



<div class="description">
    Get entries from DB that we have not yet scraped (grouped by host)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>limit</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">How many entries that we should try to get</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>cutoffValue</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The maximum depth that we should look for</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line892">line 892</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Array of DbResults
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;<a href="module-models.html#.DbResult">module:models.DbResult</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getRobotsTxt"><span class="type-signature">(static) </span>getRobotsTxt<span class="signature">(baseUrlId)</span><span class="type-signature"> &rarr; {String}</span></h4>
    

    



<div class="description">
    Get the robots.txt file for a given host. Assumption: there only ever exists a
single one, as per definition only ever a single robots.txt should exist.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>baseUrlId</code></td>
            

            <td class="type">
            
                
<span class="param-type">UUIDV4</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line988">line 988</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    The robots.txt raw string
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".insertBody"><span class="type-signature">(static) </span>insertBody<span class="signature">(pathId, body, mimeType, timestamp, statusCode, robots)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    Inserts the body of a message as on content entry into the database.
This function assumes that the data is already filtered and sanitized.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pathId</code></td>
            

            <td class="type">
            
                
<span class="param-type">UUIDV4</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">ID of the corresponding path entry.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>body</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">A JSON or HTML String containing the body.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>mimeType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">A string containing the indentifier for the
                           mime type of the response.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">A timestamp in ms, indicating when the data
                            was fetched.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>statusCode</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                    200
                
                </td>
            

            <td class="description last">HTTP Status code returned. Indicates whether
                                 the download was successful or not.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>robots</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">- Indicate if the content is a robots.txt or not. Default=false</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line453">line 453</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Returns the created content entry.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".insertUri"><span class="type-signature">(static) </span>insertUri<span class="signature">(baseUrl, subdomain, path, depth, secure, transaction)</span><span class="type-signature"> &rarr; {Array.&lt;UUIDV4>}</span></h4>
    

    



<div class="description">
    Insert a new URI into the database. The values will only be inserted if not
yet existent. However, the return value will always contain the ID's of the
corresponding entries. No update will be done on the entries if they exist.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>baseUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The base url to be inserted</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>subdomain</code></td>
            

            <td class="type">
            
                
<span class="param-type">śtring</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The URIs subdomain</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The path of the uir to be inserted</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>depth</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Indicates the search depth at which the entry is
                        to be inserted.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>secure</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">Indicate whether the uri uses http(s)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>transaction</code></td>
            

            <td class="type">
            
                
<span class="param-type">Sequelize.transaction</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The transaction to be
                                                     used for this insert.
                                                     This ensures higher
                                                     writing performance,
                                                     since only one commit
                                                     will be executed for
                                                     a bunch of insertions</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line113">line 113</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Returns the IDs of the inserted values
                          Those are always sorted as follows:
                          [baseUrlId, pathId]
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;UUIDV4></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".resetStaleEntries"><span class="type-signature">(static) </span>resetStaleEntries<span class="signature">(timeDelta)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Resets the inProgress flag. The timeDelta parameter describes how high the
timedelta of the lastModified flag has to be in order to be a stale entry.
If set to 0, every entry gets reset (this is especially useful to
restart the scraper after it was killed or crashed)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>timeDelta</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last">Indicate how long an entry has to be in
                              onProgress mode to be considered stale.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line480">line 480</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".setInProgressFlag"><span class="type-signature">(static) </span>setInProgressFlag<span class="signature">(dbResult, inProgress)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sets the inProgress flag of the specified dbResult to the passed flag.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>dbResult</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-models.html#.DbResult">module:models.DbResult</a></span>


            
            </td>

            

            

            <td class="description last">The dbResult for which the flag should be set</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>inProgress</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Pass the value to which the flag should be set</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line968">line 968</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".updateUri"><span class="type-signature">(static) </span>updateUri<span class="signature">(baseUrlId, pathId, lastStartedTimestamp, lastFinishedTimestamp, secure, successful, finished)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Update the URI entry with new data. This is typically done after a network
request finished (successfully or not). This method won't insert any data
into the database, only update already existing entries. (The updated entry
is naturally the one just downloaded, so only one at a time will be updated)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>baseUrlId</code></td>
            

            <td class="type">
            
                
<span class="param-type">UUIDv4</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The ID of the baseUrl entry to be updated</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>pathId</code></td>
            

            <td class="type">
            
                
<span class="param-type">UUIDv4</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The ID of the path entry to be updated</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>lastStartedTimestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Contains the timestamp of the start of
                                       the download</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>lastFinishedTimestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Contains the timestamp when the last
                                        download finished (independent of if
                                        it was successful or not)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>secure</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">Indicate whether a secure or insecure
                                connection was used</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>successful</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last">Indicate whether the download was finished
                                   successfully or not. This will accordingly
                                   set the lastSuccessfulTimestamp to
                                   lastFinishedTimestamp (if set to true)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>finished</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last">If set to true, this will reset the
                                 inProgress flag to false. Note that
                                 successful=true implies that the request is
                                 finished.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_index.js.html">models/index.js</a>, <a href="models_index.js.html#line405">line 405</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-models.html">models</a></li></ul><h3>Classes</h3><ul><li><a href="Conductor.html">Conductor</a></li><li><a href="module-models-db.html">db</a></li><li><a href="Network.html">Network</a></li><li><a href="Parser.html">Parser</a></li><li><a href="TorController.html">TorController</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_maxPool">_maxPool</a></li><li><a href="global.html#_maxSlots">_maxSlots</a></li><li><a href="global.html#_minPool">_minPool</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Tue Dec 24 2019 16:20:07 GMT+0100 (Mitteleuropäische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>